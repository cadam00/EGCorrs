<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Species Corridors Estimation — EGCorrs • EGCorrs</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Species Corridors Estimation — EGCorrs"><meta name="description" content="Sea Currents To Evolutionary Game Theoretic Model for Species Corridors
Estimation"><meta property="og:description" content="Sea Currents To Evolutionary Game Theoretic Model for Species Corridors
Estimation"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EGCorrs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="GitHub"><span class="fa fa-home"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/cadam00/EGCorrs/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Species Corridors Estimation</h1>

      <div class="d-none name"><code>EGCorrs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Sea Currents To Evolutionary Game Theoretic Model for Species Corridors
Estimation</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">EGCorrs</span><span class="op">(</span><span class="va">component_u</span>, <span class="va">component_v</span>, <span class="va">origin_areas</span>, <span class="va">destination_areas</span>,</span>
<span>         npoints <span class="op">=</span> <span class="fl">40L</span>, lambda <span class="op">=</span> <span class="fl">1</span>, niters <span class="op">=</span> <span class="fl">100L</span>, k_neighbors <span class="op">=</span> <span class="fl">7L</span>,</span>
<span>         nearest_grid_nodes <span class="op">=</span> <span class="fl">4L</span>, mask_shapefile <span class="op">=</span> <span class="cn">NULL</span>, all_networks <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>         progBar <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-component-u">component_u<a class="anchor" aria-label="anchor" href="#arg-component-u"></a></dt>
<dd><p><code>SpatRaster</code> object with horizontal direction.</p></dd>

<dt id="arg-component-v">component_v<a class="anchor" aria-label="anchor" href="#arg-component-v"></a></dt>
<dd><p><code>SpatRaster</code> object with vertical direction.</p></dd>

<dt id="arg-origin-areas">origin_areas<a class="anchor" aria-label="anchor" href="#arg-origin-areas"></a></dt>
<dd><p><code>sf</code> object with origin areas, as <code>POLYGON</code> or <code>MULTIPOLYGON</code>
rows.</p></dd>

<dt id="arg-destination-areas">destination_areas<a class="anchor" aria-label="anchor" href="#arg-destination-areas"></a></dt>
<dd><p><code>sf</code> object with destination areas, as <code>POLYGON</code> or
<code>MULTIPOLYGON</code> rows.</p></dd>

<dt id="arg-npoints">npoints<a class="anchor" aria-label="anchor" href="#arg-npoints"></a></dt>
<dd><p><code>integer</code> object with the number of random points for origin and
destination areas. It must be positive. The default is <code>40L</code>.</p></dd>

<dt id="arg-lambda">lambda<a class="anchor" aria-label="anchor" href="#arg-lambda"></a></dt>
<dd><p><code>numeric</code> object with the aggregation parameter \(\lambda\). The default
value is <code>1</code>.</p></dd>

<dt id="arg-niters">niters<a class="anchor" aria-label="anchor" href="#arg-niters"></a></dt>
<dd><p><code>integer</code> object with the number of points for origin and destination
areas. It must be positive. The default value is <code>100L</code>.</p></dd>

<dt id="arg-k-neighbors">k_neighbors<a class="anchor" aria-label="anchor" href="#arg-k-neighbors"></a></dt>
<dd><p><code>integer</code> object indicating the number of \(k\) of the nearest neighbors
to use from the components of horizontal and vertical directions. The default
value is <code>7L</code> nearest neighbors.</p></dd>

<dt id="arg-nearest-grid-nodes">nearest_grid_nodes<a class="anchor" aria-label="anchor" href="#arg-nearest-grid-nodes"></a></dt>
<dd><p><code>integer</code> object indicating the number of \(k\) of the nearest neighbors
to use from the random points inside origin and destination areas. The default
value is <code>4L</code> nearest neighbors.</p></dd>

<dt id="arg-mask-shapefile">mask_shapefile<a class="anchor" aria-label="anchor" href="#arg-mask-shapefile"></a></dt>
<dd><p>Optional <code>sf</code> or SpatVector object for masking <code>component_u</code> and
<code>component_v</code> <code>SpatRaster</code> objects. The default value is <code>NULL</code>,
indicating that no mask is performed.</p></dd>

<dt id="arg-all-networks">all_networks<a class="anchor" aria-label="anchor" href="#arg-all-networks"></a></dt>
<dd><p><code>logical</code> object indicating the return of <code>sfnetwork</code> per iteration.</p></dd>

<dt id="arg-progbar">progBar<a class="anchor" aria-label="anchor" href="#arg-progbar"></a></dt>
<dd><p><code>logical</code> object indicating whether to print progress bar or not. The
default is printing (<code>progBar=TRUE</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Sea currents data of the input are transformed into weighted directed graph
connectivity data. Each centroid of <code>component_u</code> and <code>component_v</code> is
considered as a separate graph node. Except from these points, random
<code>npoints</code> random origin points are generated inside the <code>origin_areas</code>
polygons/multipolygons and <code>npoints</code> random destination points are
generated inside the <code>destination_areas</code> polygons/multipolygons. These
points are equally or near equally distributed between each group of points, in
a way that totally <code>npoints</code> random points are contained inside
<code>origin_areas</code> and <code>npoints</code> random points are contained inside
<code>destination_areas</code>. The directions produced from these points are
calculated, multiplied by \(\lambda\) and finally minmax-scaled in
\([0-1]\). Thereafter, shortest paths between origin and destination points
are computed <code>niters</code> times, following a evolutionary game theoretic model.</p>
<p>Extent, resolution and coordinate system of both must have the same for both
<code>component_u</code> and <code>component_v</code>; otherwise an error stops the
function's execution. In case of mismatches between the area of these two
components and <code>origin_areas</code> or <code>destination_areas</code>, then the
intersection of these areas and the components is used instead of these areas.
In case that a <code>mask_shapefile</code> is provided, then it is internally assured
that it has the same resolution or coordinates with <code>component_u</code> and a
warning is prompted. Reproducibility of the results could be guranteed by the
use of <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">base::set.seed</a></code> before using the function.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>SeaGraphs</code> object, which is also a <code>list</code> object containing the
following elements:</p><ul><li><p>solution_edges: <code>sf</code> object representing the final edges of the
solution after <code>niters</code> iterations.</p></li>
<li><p>net_result_congestion: <code>sfnetwork</code> object representing the final
solution after <code>niters</code> iterations. Each row has the following items for
each graph edge/link \(l\):</p><ul><li><p>from: edge start for a graph vertex ID.</p></li>
<li><p>to: edge end for a graph vertex ID.</p></li>
<li><p>c_l: value of cost function \(c_l\).</p></li>
<li><p>u_l: value of utility \(u_l\).</p></li>
<li><p>u_l_population: value of utility compared to the total population of the
game (where \(population = niters * npoints\)).</p></li>
<li><p>u_l_perc: value of u_l_population normalized by the population of the
current iteration (\(u_{l_{_{perc}}}\)).</p></li>
<li><p>u_l_perc_times_c_l: u_l_perc * c_l.</p></li>
</ul></li>
<li><p>list_of_edges_freq: <code>list</code> object containing <code>data.frame</code>
objects with the the frequency that shortest path corridors pass through each
graph vertex, for each iteration.</p></li>
<li><p>list_of_congestion: <code>list</code> object containing <code>data.frame</code>
objects with congenstion metrics per graph edge for each one of the
<code>niters</code> iterations. Each row has a number indicating the graph edge/link
ID, according to the column link. All the other columns are as in
net_result_congestion output.</p></li>
<li><p>metrics_df: <code>data.frame</code> object with summarization of
list_of_congestion values accross, where:</p><ul><li><p>niters: number of the corresponding iteration.</p></li>
<li><p>rmse_u_l_perc: \(RMSE(u_{l_{_{perc}}})\).</p></li>
<li><p>rmse_u_l_perc_times_c_l: \(RMSE(u_{l_{_{perc}}} * c_l)\).</p></li>
<li><p>rmse_c_l: \(RMSE(c_l)\).</p></li>
<li><p>sum_c_l: \(\sum _l{c_l}\).</p></li>
</ul></li>
<li><p>origin_points: <code>sf</code> <code>POINT</code> object representing the origin
points.</p></li>
<li><p>destination_points: <code>sf</code> <code>POINT</code> object representing the
destination points.</p></li>
<li><p>list_of_networks: If <code>all_networks = TRUE</code>, then it is a <code>list</code>
containing net_result_congestion item for each iteration. Else, it is
<code>NULL</code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">component_u</span>       <span class="op">&lt;-</span> <span class="fu"><a href="get_component_u.html">get_component_u</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">component_v</span>       <span class="op">&lt;-</span> <span class="fu"><a href="get_component_v.html">get_component_v</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">origin_areas</span>      <span class="op">&lt;-</span> <span class="fu"><a href="get_origin_areas.html">get_origin_areas</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reading layer `origin_areas' from data source </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `/home/runner/work/_temp/Library/EGCorrs/external/origin_areas/origin_areas.shp' </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   using driver `ESRI Shapefile'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 1 feature and 1 field</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: POLYGON</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: 22.86969 ymin: 36.04912 xmax: 23.13855 ymax: 36.39421</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geodetic CRS:  WGS 84</span>
<span class="r-in"><span><span class="va">destination_areas</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_destination_areas.html">get_destination_areas</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reading layer `destination_areas' from data source </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `/home/runner/work/_temp/Library/EGCorrs/external/destination_areas/destination_areas.shp' </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   using driver `ESRI Shapefile'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 1 feature and 1 field</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: POLYGON</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: 24.3053 ymin: 36.62173 xmax: 24.49323 ymax: 36.75966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geodetic CRS:  WGS 84</span>
<span class="r-in"><span><span class="co"># Warnings are thrown because of reassuring that components u/v and</span></span></span>
<span class="r-in"><span><span class="co"># origin/destination areas are intersecting</span></span></span>
<span class="r-in"><span><span class="va">out</span>               <span class="op">&lt;-</span> <span class="fu">EGCorrs</span><span class="op">(</span><span class="va">component_u</span>, <span class="va">component_v</span>, <span class="va">origin_areas</span>,</span></span>
<span class="r-in"><span>                         <span class="va">destination_areas</span>, npoints <span class="op">=</span> <span class="fl">1</span>,  niters <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                         progBar<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>attribute variables are assumed to be spatially constant throughout all geometries</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>attribute variables are assumed to be spatially constant throughout all geometries</span>
<span class="r-in"><span><span class="co">## Warning messages:</span></span></span>
<span class="r-in"><span><span class="co">## 1: attribute variables are assumed to be spatially constant throughout all</span></span></span>
<span class="r-in"><span><span class="co">## geometries</span></span></span>
<span class="r-in"><span><span class="co">## 2: attribute variables are assumed to be spatially constant throughout all</span></span></span>
<span class="r-in"><span><span class="co">## geometries</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nikolaos Nagkoulis, Antonios D. Mazaris, Christos Adam, Stelios Katsanevakis.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

